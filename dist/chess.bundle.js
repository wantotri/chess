(()=>{"use strict";var e,t,n,a,s={10:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var a=n(990),s=e([a]);a=(s.then?(await s)():s)[0];let r=[],c=1,i=!1;function o(){l()}function l(){let e=document.getElementById("chess-game");if(e.innerHTML="",a.iX().trim().split("\n").map((e=>e.trim().split(" "))).forEach(((t,n)=>{t.forEach(((t,a)=>{h(e,t,a,0,n,(a+n)%2==0?"lightgrey":"darkgrey")}))})),d("black"),d("white"),i){let e=document.createElement("div");e.innerText="Game Over",document.getElementById("chess-move-history").append(e)}}function d(e){let t=document.getElementById(`chess-captured-${e}`),n=a.IC(e).trim().split(" ");""!==n[0]&&(t.innerHTML="",n.map((e=>t.append(_(e)))))}function u(){document.getElementById("chess-status-container").innerText=i?"Game Over":c%2==0?"Black Turn":"White Turn"}function _(e){let t=document.createElement("i");switch(e){case"♟":t.classList.add("fas","fa-chess-pawn","chess-piece-black");break;case"♜":t.classList.add("fas","fa-chess-rook","chess-piece-black");break;case"♞":t.classList.add("fas","fa-chess-knight","chess-piece-black");break;case"♝":t.classList.add("fas","fa-chess-bishop","chess-piece-black");break;case"♛":t.classList.add("fas","fa-chess-queen","chess-piece-black");break;case"♚":t.classList.add("fas","fa-chess-king","chess-piece-black");break;case"♙":t.classList.add("fas","fa-chess-pawn","chess-piece-white");break;case"♖":t.classList.add("fas","fa-chess-rook","chess-piece-white");break;case"♘":t.classList.add("fas","fa-chess-knight","chess-piece-white");break;case"♗":t.classList.add("fas","fa-chess-bishop","chess-piece-white");break;case"♕":t.classList.add("fas","fa-chess-queen","chess-piece-white");break;case"♔":t.classList.add("fas","fa-chess-king","chess-piece-white")}return t}function h(e,t,n,s,r,c){let o=document.createElement("a"),l=a.U_(7-r,n);o.setAttribute("id",l),o.classList.add("square","btn"),o.style.backgroundColor=c;let d=_(t);o.append(d),i||o.addEventListener("click",(e=>f(e,o,d,l))),e.append(o)}function f(e,t,n,s){if(e.preventDefault(),!n.className.match(/chess-piece/)&&0==r.length)return!1;if(n.className.match(/chess-piece-white/)&&c%2==0&&0===r.length)return console.log("Can't move this piece, Black turn."),!1;if(n.className.match(/chess-piece-black/)&&c%2==1&&0===r.length)return console.log("Can't move this piece, White turn."),!1;if(r.includes(s)){if(g(s)){let t=e.target.hasChildNodes()?e.target.id:e.target.parentElement.id,n=a.JY(s,t);return b(n),n.includes("Checkmate")&&(i=!0),r=[],c+=1,u(),l(),!1}r.splice(r.indexOf(s),1),t.classList.remove("selected"),a.HP(s).split(" ").map((e=>document.getElementById(e).classList.remove("path")))}else if(0==r.length){let e=a.HP(s).split(" ");""!==e[0]&&(r.push(s),t.classList.add("selected"),e.map((e=>document.getElementById(e).classList.add("path"))))}else if(1==r.length){if(!a.HP(r[0]).split(" ").includes(s))return document.getElementById(r[0]).firstChild.className.match(/fa-chess-king/)&&n.className.match(/fa-chess-rook/)&&y(s),!1;p(s)}}function p(e){let t=a.nU(r[0],e);if(console.log(t),t.includes("Illegal Moves"))return alert("Can't move this piece, illegal moves. Are your King in check?"),r=[],l(),!1;m(`${c}. ${t}`),t.includes("Checkmate")&&(i=!0),l(),g(e)?(w(e),r=[e]):(r=[],c+=1,u())}function m(e){let t=document.getElementById("chess-move-history"),n=document.createElement("div");n.innerText=e,t.append(n)}function b(e){let t=document.getElementById("chess-move-history").lastChild;t.innerText=t.innerText+" "+e}function g(e){return!(!document.getElementById(e).firstChild.className.match(/fa-chess-pawn/)||!e.includes("1")&&!e.includes("8"))}function w(e){let t=document.getElementById(e),n=t.firstChild.className.match(/chess-piece-white/)?"chess-piece-white":"chess-piece-black",a=document.createElement("div");a.setAttribute("class","promotion-level-selector"),["queen","bishop","knight","rook"].map((e=>{let t=document.createElement("a");t.setAttribute("id",e);let s=document.createElement("i");s.setAttribute("class",`fas fa-chess-${e} ${n}`),t.append(s),a.append(t)})),t.append(a)}function y(e){let t=a.nU(r[0],e);if(console.log(t),t.includes("Can't do castling")||t.includes("Illegal Moves"))return alert(t),r=[],l(),!1;m(`${c}. ${t}`),r=[],c+=1,l()}o(),t()}catch(k){t(k)}}))},990:(e,t,n)=>{n.a(e,(async(a,s)=>{try{n.d(t,{HP:()=>w,IC:()=>v,JY:()=>k,U_:()=>f,iX:()=>h,nU:()=>y});var r=n(866);e=n.hmd(e);var c=a([r]);r=(c.then?(await c)():c)[0];let i=new Int32Array;function o(){return 0===i.byteLength&&(i=new Int32Array(r.memory.buffer)),i}let l=new("undefined"==typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});l.decode();let d=new Uint8Array;function u(){return 0===d.byteLength&&(d=new Uint8Array(r.memory.buffer)),d}function _(e,t){return l.decode(u().subarray(e,e+t))}function h(){try{const n=r.__wbindgen_add_to_stack_pointer(-16);r.boardStr(n);var e=o()[n/4+0],t=o()[n/4+1];return _(e,t)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t)}}function f(e,t){try{const s=r.__wbindgen_add_to_stack_pointer(-16);r.invert(s,e,t);var n=o()[s/4+0],a=o()[s/4+1];return _(n,a)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(n,a)}}let p=0,m=new("undefined"==typeof TextEncoder?(0,e.require)("util").TextEncoder:TextEncoder)("utf-8");const b="function"==typeof m.encodeInto?function(e,t){return m.encodeInto(e,t)}:function(e,t){const n=m.encode(e);return t.set(n),{read:e.length,written:n.length}};function g(e,t,n){if(void 0===n){const n=m.encode(e),a=t(n.length);return u().subarray(a,a+n.length).set(n),p=n.length,a}let a=e.length,s=t(a);const r=u();let c=0;for(;c<a;c++){const t=e.charCodeAt(c);if(t>127)break;r[s+c]=t}if(c!==a){0!==c&&(e=e.slice(c)),s=n(s,a,a=c+3*e.length);const t=u().subarray(s+c,s+a);c+=b(e,t).written}return p=c,s}function w(e){try{const a=r.__wbindgen_add_to_stack_pointer(-16),s=g(e,r.__wbindgen_malloc,r.__wbindgen_realloc),c=p;r.getPossibleMoves(a,s,c);var t=o()[a/4+0],n=o()[a/4+1];return _(t,n)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,n)}}function y(e,t){try{const s=r.__wbindgen_add_to_stack_pointer(-16),c=g(e,r.__wbindgen_malloc,r.__wbindgen_realloc),i=p,l=g(t,r.__wbindgen_malloc,r.__wbindgen_realloc),d=p;r.movePiece(s,c,i,l,d);var n=o()[s/4+0],a=o()[s/4+1];return _(n,a)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(n,a)}}function k(e,t){try{const s=r.__wbindgen_add_to_stack_pointer(-16),c=g(e,r.__wbindgen_malloc,r.__wbindgen_realloc),i=p,l=g(t,r.__wbindgen_malloc,r.__wbindgen_realloc),d=p;r.pawnPromote(s,c,i,l,d);var n=o()[s/4+0],a=o()[s/4+1];return _(n,a)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(n,a)}}function v(e){try{const a=r.__wbindgen_add_to_stack_pointer(-16),s=g(e,r.__wbindgen_malloc,r.__wbindgen_realloc),c=p;r.getCaptured(a,s,c);var t=o()[a/4+0],n=o()[a/4+1];return _(t,n)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,n)}}s()}catch(E){s(E)}}))},866:(e,t,n)=>{e.exports=n.v(t,e.id,"6a91a35c1ee0919e2263")}},r={};function c(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={id:e,loaded:!1,exports:{}};return s[e](n,n.exports,c),n.loaded=!0,n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&!e.d&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},c.a=(s,r,c)=>{var i;c&&((i=[]).d=1);var o,l,d,u=new Set,_=s.exports,h=new Promise(((e,t)=>{d=t,l=e}));h[t]=_,h[e]=e=>(i&&e(i),u.forEach(e),h.catch((e=>{}))),s.exports=h,r((s=>{var r;o=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[e])return s;if(s.then){var r=[];r.d=0,s.then((e=>{c[t]=e,a(r)}),(e=>{c[n]=e,a(r)}));var c={};return c[e]=e=>e(r),c}}var i={};return i[e]=e=>{},i[t]=s,i})))(s);var c=()=>o.map((e=>{if(e[n])throw e[n];return e[t]})),l=new Promise((t=>{(r=()=>t(c)).r=0;var n=e=>e!==i&&!u.has(e)&&(u.add(e),e&&!e.d&&(r.r++,e.push(r)));o.map((t=>t[e](n)))}));return r.r?l:c()}),(e=>(e?d(h[n]=e):l(_),a(i)))),i&&(i.d=0)},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.v=(e,t,n,a)=>{var s=fetch(c.p+""+n+".module.wasm");return"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(s,a).then((t=>Object.assign(e,t.instance.exports))):s.then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,a))).then((t=>Object.assign(e,t.instance.exports)))},(()=>{var e;c.g.importScripts&&(e=c.g.location+"");var t=c.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),c.p=e})(),c(10)})();